<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">
    <default>
        <reference name="head">
            <block type="magicthumb/headers" name="magictoolbox_headers" as="magictoolbox_headers" after='-' />
        </reference>
        <reference name="magictoolbox_headers">
            <block type="magicthumb/header" name="magicthumb_header" as="magicthumb_header" />
        </reference>
        <reference name="right.reports.product.viewed"><!-- left.reports.product.viewed -->
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>right.reports.product.viewed</blockName>
                    <template>magicthumb/product_viewed.phtml</template>
                </template>
            </action>
        </reference>
    </default>
    <catalog_product_view>
        <reference name="magicthumb_header">
            <action method="setPageType">
                <type>product</type>
            </action>
        </reference>
        <reference name="product.info.media">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>product.info.media</blockName>
                    <template>magicthumb/media.phtml</template>
                </template>
            </action>
        </reference>
    </catalog_product_view>
    <review_product_list>
        <reference name="magicthumb_header">
            <action method="setPageType">
                <type>product</type>
            </action>
        </reference>
        <reference name="product.info.media">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>product.info.media</blockName>
                    <template>magicthumb/media.phtml</template>
                </template>
            </action>
        </reference>
    </review_product_list>
    <catalog_category_default>
        <reference name="magicthumb_header">
            <action method="setPageType">
                <type>category</type>
            </action>
        </reference>
        <reference name="product_list">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>product_list</blockName>
                    <template>magicthumb/list.phtml</template>
                </template>
            </action>
        </reference>
        <reference name="left.reports.product.viewed">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>left.reports.product.viewed</blockName>
                    <template>magicthumb/product_viewed.phtml</template>
                </template>
            </action>
        </reference>
    </catalog_category_default>
    <catalog_category_layered>
        <reference name="magicthumb_header">
            <action method="setPageType">
                <type>category</type>
            </action>
        </reference>
        <reference name="product_list">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>product_list</blockName>
                    <template>magicthumb/list.phtml</template>
                </template>
            </action>
        </reference>
    </catalog_category_layered>
    <catalog_category_layered_nochildren>
        <reference name="left.reports.product.viewed">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>left.reports.product.viewed</blockName>
                    <template>magicthumb/product_viewed.phtml</template>
                </template>
            </action>
        </reference>
    </catalog_category_layered_nochildren>
    <catalogsearch_result_index>
        <reference name="magicthumb_header">
            <action method="setPageType">
                <type>category</type>
            </action>
        </reference>
        <reference name="search_result_list">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>search_result_list</blockName>
                    <template>magicthumb/list.phtml</template>
                </template>
            </action>
        </reference>
    </catalogsearch_result_index>
    <catalogsearch_advanced_result>
        <reference name="magicthumb_header">
            <action method="setPageType">
                <type>category</type>
            </action>
        </reference>
        <reference name="search_result_list">
            <action method="setTemplate">
                <template helper="magicthumb/settings/getBlockTemplate">
                    <blockName>search_result_list</blockName>
                    <template>magicthumb/list.phtml</template>
                </template>
            </action>
        </reference>
    </catalogsearch_advanced_result>
    <cms_index_index>
        <reference name="magicthumb_header">
            <action method="setPageType">
                <type>home</type>
            </action>
        </reference>
    </cms_index_index>
</layout>
